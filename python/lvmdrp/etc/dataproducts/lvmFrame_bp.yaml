name: lvmFrame
short: the extracted fiber science spectra
description: |
  The lvmFrame files are the extracted fiber spectra for each camera for the science exposures.
location: $LVM_SPECTRO_REDUX/[DRPVER]/[TILEID]/[MJD]/
created_by: module.py
used_by: module.py
naming_convention: |
  lvmFrame-[CAMERA]-[EXPNUM].fits.gz, where [CAMERA] is one of the nine cameras on the instrument, b1, r1, z1,
  or b2, r2, z2, or b3, r3, or z3 for the blue, red, nir cameras on each LVM spectrograph, and
  [EXPNUM] is the (zero-padded) 8-digit exposure number.
hdu0:
  name: PRIMARY
  description: primary header metadata
  is_image: true
  header:
  - key: DPOS
    comment: LVM dither position
  - key: DRA
    comment: LVM dither right ascension
  - key: DDEC
    comment: LVM dither declination
  - key: VERSDRP2
    comment: LVM DRP version (2d processing)
  - key: VERSCORE
    comment: lvmcore version
  - key: VERSPY
    comment: python version
  - key: SLITFILE
    comment: Associated slitmap name
  - key: AIRMSBEG
    comment: airmass at beginning of exposure
  - key: AIRMSMID
    comment: airmass at midpoint of exposure
  - key: AIRMSEND
    comment: airmass at end of exposure
  - key: LSTBEG
    comment: LST (hours) at beginning of exposure
  - key: LSTMID
    comment: LST (hours) at midpoint of exposure
  - key: LSTEND
    comment: LST (hours) at end of exposure
  - key: HRANGBEG
    comment: hour angle (hours) at beginning of exposure
  - key: HRANGMID
    comment: hour angle (hours) at midpoint of exposure
  - key: HRANGEND
    comment: hour angle (hours) at end of exposure
  - key: DRP2QUAL
    comment: DRP-2d quality bitmask
  - key: MASKNAME
    comment: Name of the bits in sdssMaskbits.par used by MASK extension of this file
  - key: SCATVAL0
    comment: Median scattered light around all edges
  - key: SCATVAL1
    comment: Scattered light in quadrant 1
  - key: SCATVAL2
    comment: Scattered light in quadrant 2
  - key: SCATVAL3
    comment: Scattered light in quadrant 3
  - key: SCATVAL4
    comment: Scattered light in quadrant 4
  - key: SCATSIG
    comment: Deviation in SCATVAL between quadrants
hdu1:
  name: FLUX
  description: Flux in flat fielded electrons
  is_image: true
  shape: CCDROW x NFIBER
hdu2:
  name: IVAR
  description: Inverse variance (1/sigma2) for the above
  is_image: true
  shape: CCDROW x NFIBER
hdu3:
  name: MASK
  description: the quality bitmask for each fiber pixel
  is_image: true
  shape: CCDROW x NFIBER
hdu4:
  name: WSET
  description: wavelength solution traceset in log-10 Angstroms (vacuum)
  is_image: false
  shape: BINARY FITS TABLE
  columns:
    FUNC:
      name: FUNC
      type: str
      unit: ''
      description: ''
    XMIN:
      name: XMIN
      type: float64
      unit: ''
      description: ''
    XMAX:
      name: XMAX
      type: float64
      unit: ''
      description: ''
    COEFF:
      name: COEFF
      type: float64
      unit: ''
      description: ''
hdu5:
  name: SLITMAP
  description: slitmap table describing fiber positions for this exposure
  is_image: false
  shape: BINARY FITS TABLE
  columns:
    FIBEID:
      name: fiberid
      type: uint16
      description: number of the fiber along the slithead
      unit: null
    SPECTROGRAPHID:
      name: spectrographid
      type: uint16
      description: the spectrograph id number, either 1, 2 or 3
      unit: null
    BLOCKID:
      name: blockid
      type: str
      description: the ID label of the block along the slit
      unit: null
    FINBLOCK:
      name: finblock
      type: uint16
      description: the fiber number within the v-groove block
      unit: null
    TARGETTYPE:
      name: targettype
      type: str
      description: the type of fiber, either science, standard or sky
      unit: null
    IFULABEL:
      name: ifulabel
      type: str
      description: an ID label for the telescope + sector
      unit: null
    FINIFU:
      name: finifu
      type: uint16
      description: a running fiber number within the IFU from 1 to N
      unit: null
    TELESCOPE:
      name: telescope
      type: str
      description: the name of the telescope; Sci, Spec, SkyE/W for science, standards, or skies
      unit: null
    XPMM:
      name: xpmm
      type: float32
      description: the x coordinate in mm of the fiber relative to the centroid
      unit: mm
    YPMM:
      name: ypmm
      type: float32
      description: the x coordinate in mm of the fiber relative to the centroid
      unit: mm
    RINGNUM:
      name: ringnum
      type: uint16
      description: the number of the IFU ring the fiber belongs to
      unit: null
    ORIG_IFULABEL:
      name: orig_ifulabel
      type: str
      description: the original IFU label from the Excel document. WRONG! DO NOT USE!
      unit: null
    ORIG_SLITLABEL:
      name: orig_slitlabel
      type: str
      description: the original slitblock label from the Excel document. WRONG! DO NOT USE!
      unit: null
    FINSECTOR:
      name: finsector
      type: uint16
      description: the original fiber number within the IFU sector
      unit: null
    FMAP:
      name: fmap
      type: str
      description: the current fiber flow FROM:TO from the IFU position to the SLIT position.
      unit: null
    YPIX_B:
      name: ypix_b
      type: uint32
      description: the y coordinate in pixels of the fiber at column 2000 for channel b
      unit: pixels
    YPIX_R:
      name: ypix_r
      type: uint32
      description: the y coordinate in pixels of the fiber at column 2000 for channel r
      unit: pixels
    YPIX_Z:
      name: ypix_z
      type: uint32
      description: the y coordinate in pixels of the fiber at column 2000 for channel z
      unit: pixels
    FIBSTATUS:
      name: fibstatus
      type: uint16
      description: the status of the fiber, 0=good, 1=dead, 2=low, 3=repair, 4=short
      unit: null
hdu6:
  name: XPOS
  description: x position on the CCD
  is_image: true
  shape: CCDROW x NFIBER
hdu7:
  name: SUPERFLAT
  description: superflat vector from quartz lamps
  is_image: true
  shape: CCDROW x NFIBER
hdu8:
  name: AIRSET
  description: observed wavelength traceset in log-10 Angstroms (air)
  is_image: false
  shape: BINARY FITS TABLE
  columns:
    FUNC:
      name: FUNC
      type: str
      unit: ''
      description: ''
    XMIN:
      name: XMIN
      type: float64
      unit: ''
      description: ''
    XMAX:
      name: XMAX
      type: float64
      unit: ''
      description: ''
    COEFF:
      name: COEFF
      type: float64
      unit: ''
      description: ''